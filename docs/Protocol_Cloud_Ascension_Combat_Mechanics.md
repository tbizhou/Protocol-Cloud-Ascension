# 游戏策划案：战斗数值公式与技能设计

**项目名称:** 云端飞升协议 (Protocol: Cloud Ascension)  
**版本:** 1.0 (Combat & Skills)  
**模块:** 战斗数值 (Math) & 技能库 (Skill DB)  

---

## 1. 核心数值计算：硬件 vs 代码 (Combat Formulas)

本游戏的战斗机制基于 **“时间轴块状碰撞” (Timeline Block Collision)**。伤害计算并非单纯的数值减法，而是根据攻击类型（物理/逻辑）进行不同的判定。

### 1.1 基础属性定义

| 属性符号 | 中文名称 | 来源 | 作用描述 |
| :--- | :--- | :--- | :--- |
| **$ATK_{hw}$** | 硬件攻击力 | CPU频率 / 显卡算力 | 代表指令块的**“质量/大小”**。 |
| **$DEF_{str}$** | 结构防御 | 机箱材质 / 合金骨骼 | 代表承受物理碰撞的能力。 |
| **$ATK_{code}$** | 代码强度 | 算法优化 / 逻辑深度 | 代表指令流的**“穿透力/密度”**。 |
| **$DEF_{log}$** | 逻辑防火墙 | 杀毒软件 / 精神壁垒 | 代表拦截异常代码的能力。 |
| **$HEAT$** | 当前热量 | 战斗积累 (0% - 100%) | 影响硬件攻击加成与过热惩罚。 |

### 1.2 碰撞判定逻辑 (Collision Logic)

当玩家的攻击块在时间轴上撞击敌人的防御块时：

#### A. 煅体流（硬件攻击）判定公式
硬件攻击被视为“重物撞击”。判定核心在于是否能**击碎**对方的结构。

$$
\text{CrushFactor} = \frac{ATK_{hw} \times (1 + HEAT\%)}{DEF_{str\_enemy}}
$$

* **若 $\text{CrushFactor} \ge 1.0$ (碾压)**：
    * **结果**：直接击碎防御块，造成 **100% 物理伤害**。
    * **特效**：附加“震荡”效果（打断敌人当前动作）。
* **若 $\text{CrushFactor} < 1.0$ (格挡)**：
    * **结果**：未能击碎，只造成 **$(\text{CrushFactor}) \times \text{BaseDmg}$** 的擦伤。
    * **反噬**：攻击者受到 10% 的反震伤害。

#### B. 修灵流（代码攻击）判定公式
代码攻击被视为“针尖穿刺”。判定核心在于是否能**绕过**对方的防火墙。

$$
\text{PenetrateRate} = \frac{ATK_{code}}{DEF_{log\_enemy} + ATK_{code}}
$$

* **若 $\text{Random}(0, 1) < \text{PenetrateRate}$ (穿透)**：
    * **结果**：成功绕过防火墙，造成 **100% 真实伤害 (True Damage)**。
    * **特效**：无视护盾。
* **若 判定失败 (被拦截)**：
    * **结果**：被防火墙隔离，造成 **0 伤害**。
    * **补偿**：增加敌方 1 层“漏洞层数”（Vulnerability Stack），每层提高下一次 5% 的穿透率。

### 1.3 最终伤害计算

$$
\text{FinalDamage} = (\text{BaseDmg} \times \text{SkillMultiplier}) \times \text{CritMultiplier} \times \text{TypeMod}
$$

* **TypeMod (类型克制修正)**：
    * **硬件 $\to$ 硬件**：1.0 (标准)
    * **硬件 $\to$ 代码**：1.5 (暴力删除 - 克制)
    * **代码 $\to$ 代码**：1.0 (逻辑博弈)
    * **代码 $\to$ 硬件**：0.8 (对牛弹琴 - 被克制，除非触发穿透)

---

## 2. 流派技能设计 (Skill Design)

### 2.1 路线一：煅体流 (The Hardware Path)
**风格关键词：** 高热量、高爆发、反伤坦克、暴力破解。

| 技能位 | 技能名称 | 英文代号 | 冷却/消耗 | 效果描述 |
| :--- | :--- | :--- | :--- | :--- |
| **先天技能** | **被动散热器：玄冥** | `Passive_Xuanming` | 被动 | **[热能转化]** 你的热量越高，防御越高（每1%热量提供0.5%免伤）。<br>**[红温霸体]** 热量达100%时，不立即过热，而是进入3秒霸体状态（攻击翻倍），结束后强制眩晕。 |
| **核心 I** | **内存撞角** | `RAM_Ram` | CD: 5s<br>热量: +10% | **[物理吸血]** 在时间轴生成巨大数据块。若成功“击碎”敌方防御，恢复本次伤害 20% 的结构完整性。 |
| **核心 II** | **静电荆棘** | `Static_Shell` | CD: 12s<br>热量: +5% | **[反伤护盾]** 持续3秒。受到“代码类”攻击时，顺着网线反击敌人，造成 80% $ATK_{hw}$ 的电击伤害。 |
| **核心 III** | **液氮超频** | `Nitro_Overclock` | CD: 20s<br>热量: 清零 | **[爆发增益]** 瞬间清空所有热量。每清空 1% 热量，下一次攻击伤害提升 2%。 |
| **终极技** | **物理蓝屏：开天** | `Ult_BSOD_Strike` | CD: 60s<br>消耗: 99% HP | **[毁灭打击]** 献祭自身99%当前血量，造成一次**无视防御**且**必定击碎**全屏所有色块的打击。<br>*“重启解决一切问题。”* |

### 2.2 路线二：修灵流 (The Code Path)
**风格关键词：** 多段连击、控制、概率穿透、逻辑炸弹。

| 技能位 | 技能名称 | 英文代号 | 冷却/消耗 | 效果描述 |
| :--- | :--- | :--- | :--- | :--- |
| **先天技能** | **零日漏洞** | `Passive_ZeroDay` | 被动 | **[概率溢出]** 你的所有攻击有 15% 概率触发“溢出”。溢出的攻击不消耗时间轴（瞬发），且必定暴击。 |
| **核心 I** | **递归炸弹** | `Fork_Bomb` | CD: 3s<br>内存: 低 | **[叠毒]** 向敌人植入种子。每回合造成 $50\% ATK_{code}$ 伤害。叠满 5 层后爆炸，造成巨额伤害并清空层数。 |
| **核心 II** | **404 屏蔽** | `Shield_404` | CD: 15s<br>内存: 高 | **[完全闪避]** 生成一段透明代码。敌人的下一次攻击会直接“Miss”穿过你，并因空指针引用受到反噬伤害。 |
| **核心 III** | **死循环困阵** | `Loop_Trap` | CD: 25s<br>内存: 中 | **[时停]** 强制停止时间轴流动 2 秒。期间你可以自由执行脚本（用于叠毒或回血），敌人无法行动。 |
| **终极技** | **根权限：大衍** | `Ult_Sudo_Root` | CD: 60s<br>消耗: 算力 | **[修改规则]** 临时获得 Root 权限。将敌人的 $DEF_{str}$ 和 $DEF_{log}$ 强制归零，持续 5 秒。<br>*“你的防御，归我管了。”* |

### 2.3 隐藏流派：机魂双修 (The Fusion Path)
**开启条件：** 需触发隐藏事件“系统崩溃 (Kernel Panic)”。
**特点：** 拥有上述两系全部技能库，并获得专属先天被动。

| 技能位 | 技能名称 | 英文代号 | 类型 | 效果描述 |
| :--- | :--- | :--- | :--- | :--- |
| **先天技能** | **奇偶校验：太极** | `Passive_Taiji` | 被动 | **[机魂共鸣]**<br>1. **属性共享**：硬件攻击力的 50% 加成给代码强度，反之亦然。<br>2. **阴阳循环**：<br>- 施放硬件技能 $\to$ 下次代码技能 **必定暴击**。<br>- 施放代码技能 $\to$ 下次硬件技能 **不产热量**。 |

---

## 3. 设计备注 (Design Notes)

1.  **关于平衡性 (Balance)**：
    * **煅体流**：属于“下限高，上限低”。前期推图极快，但在面对特定机制怪（如物理免疫盾）时，必须依赖道具或特定终极技能。
    * **修灵流**：属于“下限低，上限高”。前期极易暴毙，但在后期拥有极强的控制和斩杀能力，是攻坚高难副本的首选。
    * **双修流**：操作难度极大。需要像玩音乐游戏一样精准控制技能释放顺序（硬->软->硬->软）以维持被动 Buff，一旦断节奏容易过热自爆。

2.  **关于技术实现 (Tech Implementation)**：
    * 建议在 JSON 数据中为每个技能添加 `type: "HARDWARE" | "CODE"` 字段。
    * “时间轴”在前端可以用 CSS Animation 或 Canvas 绘制，后端只需校验 `Timestamp` 和 `CollisionCheck`。
