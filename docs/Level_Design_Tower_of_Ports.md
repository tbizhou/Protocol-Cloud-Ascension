# 关卡设计案：万象端口塔 (The Tower of 65535 Ports)

**项目名称:** 云端飞升协议 (Protocol: Cloud Ascension)  
**版本:** 1.0 (Level Design)  
**定位:** 核心 PVE 玩法 / 爬塔推图  
**范围:** Port 1 ~ Port 65535  

---

## 1. 整体结构：层域划分 (The Strata)

为了赋予 65535 层爬塔过程以明确的阶段感，我们将塔划分为四个“层域”。每个层域代表了网络世界的不同深度，拥有独立的美术风格与环境减益 (Debuff)。

| 层数范围 | 层域名称 (Zone Name) | 环境风格 (Visuals) | 怪物生态 | 核心环境 Debuff |
| :--- | :--- | :--- | :--- | :--- |
| **1 - 1,023** | **旧日系统层**<br>*(System Ports)* | **[复古/废土]**<br>生锈的服务器机架，巨大的散热风扇，DOS风格的绿色字符雨。 | **守护进程 (Daemons)**<br>古老的系统服务，动作僵硬但数值极高。 | **[陈旧协议]**<br>代码流速变慢。<br>**效果**：所有技能冷却时间增加 20%。 |
| **1,024 - 10,000** | **用户注册层**<br>*(User Land)* | **[霓虹/赛博都市]**<br>繁华的虚拟都市下水道，广告弹窗横飞，高饱和度色彩。 | **恶意软件 (Malware)**<br>广告机器人、挖矿木马、脚本小子幻影。 | **[过载噪音]**<br>大量垃圾信息干扰视线。<br>**效果**：每回合 15% 概率被弹窗遮挡，导致攻击 Miss。 |
| **10,001 - 49,151** | **数据深渊层**<br>*(Registered Void)* | **[深海/高压]**<br>幽暗的光缆丛林，数据像水母一样漂浮，极度压抑的深蓝。 | **数据畸变体 (Glitches)**<br>损坏的数据库残渣，被遗忘的AI，外形扭曲。 | **[深层水压]**<br>硬件承受巨大物理压力。<br>**效果**：每回合扣除 1% 最大结构完整性 (HP)。 |
| **49,152 - 65,535** | **动态混沌层**<br>*(Ephemeral Chaos)* | **[虚无/极简]**<br>崩坏的像素，无法解析的几何体，纯白与纯黑的交替。 | **虚空行者 (Unknown)**<br>不可名状的乱码，以及其他玩家的“心魔镜像”。 | **[熵增]**<br>世界正在崩塌。<br>**效果**：战斗最大回合数强制减半（必须速杀）。 |

---

## 2. 关卡生成逻辑 (Generation Logic)

采用 **“程序化生成 + 手工锚点”** 结合的方式，保证耐玩性与惊喜感。

### 2.1 普通层 (Normal Nodes)
* **占比**：约 90%
* **内容**：随机生成 1-3 只对应层域的小怪。
* **机制**：**战力验证 (DPS Check)**。
    * 若玩家在 10秒内 结束战斗，视为“碾压”，触发**自动寻路**进入下一层。

### 2.2 精英层 (Elite Nodes)
* **位置**：每 100 层固定出现 (e.g., Port 100, 200...)。
* **怪物**：**特化门神**。
    * **逻辑锁 (Logic Lock)**：物理免疫。强制要求玩家具备一定的[代码伤害]。
    * **硬件墙 (Firewall Brick)**：逻辑免疫。强制要求玩家具备一定的[物理伤害]。
* **目的**：迫使玩家检查流派短板，或在“双修”未成型前使用特定道具通关。

### 2.3 知名端口 BOSS (Well-Known Port Bosses)
核心设计点。利用现实网络协议的特性设计 BOSS 技能与形象。

---

## 3. 重点 BOSS 设计实例 (Boss Showcase)

### **Port 21: 传输巨灵 (The FTP Titan)**
* **所在层级**：第 21 层（新手教学/劝退 BOSS）
* **原型**：FTP 文件传输协议。
* **形象**：由无数文件夹和压缩包堆叠而成的巨大铁人，双手是两条发光的上传/下载进度条。
* **机制**：
    * **[被动] 断点续传**：当 HP < 30% 时，开始尝试“重新下载”本体数据。每回合回复 5% HP。
        * *应对*：必须使用**控制类**技能（如 `Freeze`）打断下载。
    * **[大招] 批量上传**：召唤 5 个“小文件包”杂兵。如果不先清理杂兵，BOSS 处于无敌状态。
* **掉落**：`新手散热器 Mk.1` (硬件)

### **Port 80: 万维蛛母 (The HTTP Matriarch)**
* **所在层级**：第 80 层（前期分水岭）
* **原型**：HTTP 网页服务。
* **形象**：一只巨大的机械蜘蛛，编织着名为 "World Wide Web" 的粘稠网络，网上挂满了被捕获的数据包。
* **机制**：
    * **[环境] 404 Not Found**：随机将玩家的一个技能槽“屏蔽”（变为灰色图标 `404`），持续 3 回合。
    * **[技能] GET 请求洪泛**：发起每秒 1000 次的微小攻击。
        * *煅体流*：依靠高防御和反伤（技能：静电荆棘）直接把 BOSS 弹死。
        * *修灵流*：开启 `Shield_404` 闪避掉海量攻击。
* **掉落**：`蜘蛛爬虫脚本` (代码：增加掉率)

### **Port 443: 加密守望者 (The SSL Sentinel)**
* **所在层级**：第 443 层（进阶技巧 BOSS）
* **原型**：HTTPS 加密传输。
* **形象**：一个全身包裹在金色光盾中的悬浮棱镜，核心不可见。
* **机制**：
    * **[被动] 握手协议 (Handshake)**：战斗开始的前 10 秒，BOSS 拥有 99% 减伤（正在建立安全连接）。玩家需利用此时间叠 Buff。
    * **[转换] 公钥/私钥形态**：BOSS 每 10 秒切换一次防御姿态。
        * **公钥态**：物防极高，魔抗为 0 $\to$ **修灵流**爆发时机。
        * **私钥态**：魔抗极高，物防为 0 $\to$ **煅体流**爆发时机。
* **掉落**：`SSL证书碎片` (合成双修核心材料)

### **Port 3306: 数据吞噬者 (The Dolphin Daemon)**
* **所在层级**：第 3306 层（中期大坎）
* **原型**：MySQL 数据库。
* **形象**：一只在数据池中游弋的机械海豚（致敬 MySQL Logo），满嘴利齿，背部有 SQL 注入留下的伤痕。
* **机制**：
    * **[大招] Drop Table**：蓄力 5 秒。若不被打断，直接卸下玩家一件装备（临时移除），战斗结束后归还。
    * **[被动] 事务回滚 (Rollback)**：如果玩家 3 回合内的总伤害未达到阈值，BOSS 将时间轴回退到 3 回合前的状态（血量回满）。
* **掉落**：`数据库索引` (被动：增加暴击率)

### **Port 65535: 终焉之口 (The Final Socket)**
* **所在层级**：第 65,535 层（通关/转生点）
* **形象**：一个只有纯黑色的像素点，随后逐渐扩大吞噬整个屏幕。
* **机制**：
    * **[溢出] Stack Overflow**：战斗没有时间轴，没有回合。屏幕上疯狂涌现乱码。
    * **胜利条件**：玩家必须在内存爆满（游戏崩溃）之前，将所有剩余算力孤注一掷。
* **结局**：击败后，游戏强制黑屏（模拟崩溃），重启后获得 **[Root 权限]**，开启二周目。

---

## 4. 快速推进系统 (QoL Features)

为了解决 65535 层流程过长的问题，设计以下系统：

1.  **端口转发 (Port Forwarding / Skip)**
    * **触发**：当玩家对当前层怪物的伤害溢出（一击秒杀）时触发。
    * **效果**：系统提示 `“检测到算力溢出，建立隧道...”`，直接跳过接下来的 10~50 层，并一次性结算所有掉落。

2.  **后台扫描 (Background Scanning / Idle)**
    * **触发**：玩家关闭网页或离线。
    * **效果**：角色停留在“当前最高层”反复刷怪。上线时领取积累的资源（算力/比特金）。
    * **自动爬塔**：若购买了“脚本托管服务”（月卡功能），离线时可自动向下推进层数，直到战败。

3.  **批量脚本 (Batch Script)**
    * 允许玩家预设战术逻辑：
    * `IF (Enemy == Elite) THEN (Switch_Loadout: Burst_Damage)`
    * `IF (HP < 30%) THEN (Cast: Heal)`

---

## 5. UI/UX 表现建议

* **视觉隐喻**：
    * 左侧进度条采用 **“深井钻探”** 的视觉风格。数字 `1` 在顶端，`65535` 在深渊底部。
    * 随着层数下降，界面背景色温逐渐降低（从暖色霓虹 $\to$ 冷色深蓝 $\to$ 纯黑白）。
* **过场特效**：
    * 每突破一个层域（如 1024 层），屏幕播放 **Glitch (故障)** 特效，BGM 从 8-bit Chiptune 无缝切换到 Synthwave/Dark Techno。
